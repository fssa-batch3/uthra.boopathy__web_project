<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title> My products page </title>
   <link rel="stylesheet" href="../../assets/css/myproduct.css" />
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />        <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Kreon:wght@300;400;500;600;700&family=Kumbh+Sans:wght@100;200;300;400;500;600;700;800;900&family=Parisienne&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet">
</head>

<body>
    <header>
        <a href="../homepage/frontpage.html"> <img class="logo" src="../../assets/images/logo.png" alt="logo" /> </a>
        <h1> Thara's World </h1>
          <div class="nav">
             <ul>
                <li> <a href="../orders/cartpage.html"><i class="fa-sharp fa-solid fa-cart-shopping"></i></a></li>
                <li> <a href="../orders/wishlistpage.html"><i class="fa-sharp fa-solid fa-heart"></i></a></li> 
                <li><a href="../orders/myorderspage.html"><i class="fa-solid fa-bag-shopping"></i></a></li>
                <li><a href="#"><i class="fa-solid fa-bell"></i></i></a></li>
                <li><a href="profilepage.html"><i class="fa-solid fa-circle-user"></i></a></li>
                <li> <a href="../homepage/loginpage.html"><span class="login"> Login </span> </a></li>
              </ul>
          </div>

          <div class="menu">
                
            <i class="fa-solid fa-bars"></i>               
             <div class="menu-list">
                
                    <a href="../orders/cartpage.html"><i class="fa-sharp fa-solid fa-cart-shopping"></i></a>
                    <a href="../orders/wishlistpage.html"><i class="fa-sharp fa-solid fa-heart"></i></a>
                    <a href="../orders/myorderspage.html"><i class="fa-solid fa-bag-shopping"></i></a>
                    <a href="#"><i class="fa-solid fa-bell"></i></i></a>
                    <a href="profilepage.html"><i class="fa-solid fa-circle-user"></i></a>
                    <a href="loginpage.html"><span class="login"> Login </span> </a>
            
             </div>
         </div>

    </header>

    <section>

        <button class="add"> <a href="../products/addproduct.html"> Add Products </a> </button> 

               <!-- <div class="box"> 

                 <div class="photo"> 
                    <img src="../../assets/images/silk12.jpg" alt="photo" width="300px"/>
                 </div>

                 <div class="right">
                    <h3 id="name"> Jacquard Material Self Designed Saree </h3>
                    <h4> Special price </h4>
                    <div class="price">
                    <p id="original_price" > ₹629 </p>  <p> <s id="discount_price">₹2,999 </s> </p>  <p> <b id="discount_percent">79% off</b> </p>
                    </div>
            
                    <div class="star">
                        <span class="stars"> REVIEW: </span>
                        <i class="fa fa-star" style="font-size: 24px;color: gold"></i>
                        <i class="fa fa-star" style="font-size: 24px;color: gold"></i>
                        <i class="fa fa-star" style="font-size: 24px;color: gold"></i>
                        <i class="fa fa-star" style="font-size: 24px;color: gold"></i>
                        <i class="fa fa-star" style="font-size: 24px;color: gold"></i>
                    </div>
        

                        <strong>  Product details:  </strong>
                         <div class="para" id="product_detail" >
                        <p> *Material Details: <br>
                         *Saree type: Silk cotton <br>
                         *Saree length: 5 metres  <br>
                         *Blouse length: 1 metres</p>
                         <div> 

                        <strong class="add_info"> Additional offers: </strong> 
                         <div class="paras" id="add_info" >
                            <p > *Special PriceGet extra 30% off (price inclusive of cashback/coupon)T&C <br>
                
                            *Bank Offer5% Cashback on Thara's World Axis Bank CardT&C <br>
                   
                            *Partner OfferSign up for Thara's World Pay Later and get Thara's World Gift Card worth up to ₹500 </p> 
                        </div>  

                   <button class="edit" type="submit"> <a href="../products/editproduct.html"> Edit </a> </button>
                     <button type="submit" onclick="del_pdt()" > Delete </button>  

                    
             </div>  -->

    </section>

    <script>


            
            let add_product = JSON.parse(localStorage.getItem("add_products"));
            // let uuid = JSON.parse(localStorage.getItem("product_uuid"));
            console.log(add_product);

            
            let div_box;
            let div_photo;
            let img;
            let div_right;
            let h3_title;
            let h4_sub;
            let div_price;
            let p_org;
            let p_dis;
            let s;
            let p_percent;
            let b;
            let div_star;
            let span;
            let i;
            let strong_pdt;
            let div_pdt;
            let p_pdt;
            let strong_add;
            let div_add;
            let p_add;
            let button_edit;
            let a;
            let button_del;


         for ( let k=0; k < add_product.length; k++){

    // <div class = "box" > </div>

            div_box = document.createElement("div");
            div_box.setAttribute("class", "box");
            // console.log(div_box);


            // < div class = "photo" > </div>

            div_photo = document.createElement("div");
            div_photo.setAttribute("class", "photo");
            div_box.append(div_photo)
            // console.log(div_photo);

            // <img/>
            
            img = document.createElement("img");
            img.setAttribute("src", add_product[k]["image"]);
            img.setAttribute("alt", "photo");
            img.setAttribute("height", "300px");
            img.setAttribute("width", "280px");
            div_photo.append(img);

            // < div class = "right" > </div>

            div_right = document.createElement("div");
            div_right.setAttribute("class", "right");
            div_box.append(div_right);
            console.log(div_right);

            // < h3 id = "name"> </h3>

            h3_title = document.createElement("h3");
            h3_title.setAttribute("id", "name");
            h3_title.innerText = add_product[k]["name"];
            div_right.append(h3_title);

            // h4> </h4>

            h4_sub =  document.createElement("h4");
            h4_sub.innerText = "Special price:";
            div_right.append(h4_sub);

            // <div class = "price" > </div>

            div_price = document.createElement("div");
            div_price.setAttribute("class", "price");
            div_right.append(div_price);

           // < p id = "original_price" > </p>

           p_org = document.createElement("p");
           p_org.setAttribute("id", "original_price");
           p_org.innerText = "₹" + add_product[k]["discount_price"];
           div_price.append(p_org);

            // <p> </p>

            p_dis = document.createElement("p");
            div_price.append(p_dis);

            // <s> </s>

            s = document.createElement("s");
            s.setAttribute("id", "discount_price");
            s.innerText = "₹" + add_product[k]["original_price"];
            p_dis.append(s);

            // <p> </p>

            p_percent = document.createElement("p");
            div_price.append(p_percent);

            // < b > </b>

            b = document.createElement("b");
            b.setAttribute("id", "discount_percent");
            b.innerText = add_product[k]["discount_percent"] + "%" + "off";
            p_percent.append(b);

            // <div class = "star"> </div>

            div_star = document.createElement("div");
            div_star.setAttribute("class", "star");
            div_right.append(div_star);


            // <span> </span>

            span = document.createElement("span");
            span.setAttribute("class", "stars");
            span.innerText = "Reviews:";
            div_star.append(span);


        for (j=0; j<5; j++) {

            // <i> </i>

            i = document.createElement("i");
            i.setAttribute("class", "fa fa-star");
            i.setAttribute("style", "font-size: 24px;color: gold");
            div_star.append(i)

        }            

            // < strong> </strong>

            strong_pdt = document.createElement("strong");
            strong_pdt.innerText = "Product details:"
            div_right.append(strong_pdt);

            // <div class = "para"> </div>

            div_pdt = document.createElement("div");
            div_pdt.setAttribute("class", "para");
            div_pdt.setAttribute("id", "product_detail");
            div_right.append(div_pdt);

            // <p> </p> 

            p_pdt = document.createElement("p");
            p_pdt.innerText = add_product[k]["product_detail"];
            div_pdt.append(p_pdt);

            // < strong> </strong>

            strong_add = document.createElement("strong");
            strong_add.innerText = "Additional offers";
            div_right.append(strong_add);

            // <div class = "para"> </div>

            div_add = document.createElement("div");
            div_add.setAttribute("class", "paras");
            div_add.setAttribute("id", "add_info");
            div_right.append(div_add);


            // <p> </p> 

            p_add = document.createElement("p");
            p_add.innerText = add_product[k]["add_info"];
            div_add.append(p_add);

            // <button class = "edit"> </button>


            button_edit  = document.createElement("button");
            button_edit.setAttribute("class", "edit");
            button_edit.setAttribute("data-id", add_product[k]["product_uuid"]);
            button_edit.setAttribute("type", "submit");
            button_edit.innerText = "Edit";
            div_right.append(button_edit);
            console.log(button_edit);

           
            // <button> </button>

            button_del = document.createElement("button");
            button_del.setAttribute("type", "submit");
            button_del.setAttribute("class", "del");
            button_del.setAttribute("onclick", "del_pdt()");
            button_del.innerText = "Delete";
            div_right.append(button_del);

           
            button_remove = document.createElement("button");
            button_remove.setAttribute("type", "submit");
            button_remove.setAttribute("class", "remove");
            button_remove.setAttribute("onclick", "remove_pdt()");
            button_remove.innerText = "Remove";
            div_right.append(button_remove);
            


            add_remove = document.createElement("button");
            add_remove.setAttribute("type", "submit");
            add_remove.innerText="Add";
            add_remove.setAttribute("class", "adding");
            add_remove.setAttribute("style", "display:none;"); 
            add_remove.setAttribute("onclick", "add_pdt()");   
            div_right.append(add_remove);


            // button_remove = document.createElement("button");
            // button_remove.setAttribute("type", "submit");
            // // button_remove.setAttribute("id", "toggle");
            // button_remove.setAttribute("onclick", "add_pdt()");
            // button_remove.innerText = "Add";
            // div_right.append(button_remove);


            document.querySelector("section").append(div_box);            

         }


                        let product_details = document.querySelectorAll("button.edit")
                            product_details.forEach(function(find){
                                find.addEventListener("click", function(){
                                    let product_description = this.dataset.id;
                                    localStorage.setItem("productDetail",JSON.stringify(product_description))
                                    window.location.href = `../products/editproduct.html?product_id=${product_description}`;
                                    console.log(product_details)
                                    }
                                )
                                }   
                            )

            
            // document.getElementById("name").innerText = add_product[k]["name"];
            // document.getElementById("original_price").innerText = add_product[k]["original_price"];
            // document.getElementById("discount_price").innerText = add_product[k]["discount_price"];
            // document.getElementById("discount_percent").innerText = add_product[k]["discount_percent"];
            // document.getElementById("product_detail").innerText = add_product[k]["product_detail"];
            // document.getElementById("add_info").innerHTML = add_product[k]["add_info"];
            

            // delete product function
        
            function del_pdt(){
            
                if(confirm("Are you sure to delete this product ?")){
           
                    let add_products = JSON.parse(localStorage.getItem("add_products"));
                
                    const indexOfUser = add_products.indexOf(add_products);

                    add_products.splice(indexOfUser, 1);
                    
                    localStorage.setItem("add_products", JSON.stringify(add_products));

                    window.location.href = "../homepage/frontpage.html";
                }
    
        }


        function remove_pdt () {

            if ( confirm ( "Are you sure to remove this product ?" ) ) {

                // gor getting the particular id

                let product_id = JSON.parse(localStorage.getItem("productDetail"))
                // console.log(product_id);

                // getting the product datas from the local storage

                let all_products = JSON.parse(localStorage.getItem("add_products"));

                // finding the particular data

                let add_product = all_products.find(e => e.product_uuid == product_id);

                // console.log(add_product);

                // set the status as false
                
                add_product["status"] = false;

                // stringify the datas which are all get

                localStorage.setItem("add_products", JSON.stringify(all_products));

            }

            let removeBtn = document.querySelector("button.remove");
            
            removeBtn.setAttribute("style","display:none");
            
            document.querySelector("button.adding").setAttribute("style", "display:inline")

        }


        function add_pdt () {
            
            if ( confirm ( "Are you sure to add this product?" ) ) {

                let product_id = JSON.parse(localStorage.getItem("productDetail"))

                let all_products = JSON.parse(localStorage.getItem("add_products"));

                let add_product = all_products.find(e => e.product_uuid == product_id);

                add_product["status"] = true;

                localStorage.setItem("add_products", JSON.stringify(all_products));


            }
        
        }





        </script>

    </body>

</html>