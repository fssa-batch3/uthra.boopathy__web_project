<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Add product page </title>
        <link rel="stylesheet" href="../../assets/css/addproduct.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Kreon:wght@300;400;500;600;700&family=Kumbh+Sans:wght@100;200;300;400;500;600;700;800;900&family=Parisienne&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
</head>  
    
    <body>
        <header>
         <a href="../homepage/frontpage.html"> <img class="logo" src="../../assets/images/logo.png" alt="logo" height="70px" width="70px"/> </a>
         <h1> Thara's World </h1>
              <div>
                 <ul>
                    <li> <a href="../orders/cartpage.html"><i class="fa fa-shopping-cart" style="font-size:24px;color: #fff;" ></i></a></li>
                    <li> <a href="../orders/wishlistpage.html"><i class="fa fa-heart-o" style="font-size: 24px;color: #fff;"></i></a></li> 
                    <li><a href="../orders/myorderspage.html"><i class="fa fa-shopping-bag" style="font-size:22px;color: #fff"></i></a></li>
                    <li><a href="#"><i class="fa fa-bell" style="font-size:24px;color: #fff"></i></a></li>
                    <li><a href="../homepage/profilepage.html"><i class="fa fa-user-circle-o" style="font-size:24px;color: #fff;"></i></a></li>
                    <li> <a href="../homepage/loginpage.html"><span class="login"> Login </span> </a></li>
                  </ul>
              </div>
        </header>

        <section>

            <form role="form" onsubmit="add_product(event)" >

            <h2> ADD PRODUCTS </h2>

            <div class="box"> 
                
                <div class="photo" id="imgBox"> 
                    <div class="camera">                    
                    <input type="file" accept="image/*" name="image" id="image" style = "display: none" />
                    <label for="image" class="camera"><i class="fa fa-camera" style="color: #000;"></i></label>
                </div>
  
                    <!-- <input type="file" id="image"/> -->
                </div>

                <div class="details">

                    <div>  
                        <label> Name of the product: </label> <br>
                        <input type="text" id="name" required />
                    </div>

                    <div>  
                        <label> Original price: </label> <br>
                        <label>₹</label>
                        <input type="number" id="original_price" pattern="[0-9]{0,}" required />
                    </div>

                     <div>
                        <label> Discount price: </label> <br>
                        <label>₹</label>
                        <input type="number" id="discount_price" pattern="[0-9]{0,}" /> 
                    </div>

                    <div>
                        <label> Discount percentage:</label> <br>
                        <input type="number" id="discount_percent" />
                        <label> % </label>
                    </div> 

                    <div>
                        <label> Category: </label>
                        <select id="category" required>
                            <option selected="selected" > Select category </option>
                        </select>

                        <label> Type: </label>
                        <select id="type" required>
                            <option selected="selected"> Select category </option>
                        </select>

                    </div>

                    <div class="add">  
                        <label> Product details: </label> <br>
                        <textarea id="product_detail" required ></textarea>
                    </div>

                    <div class="add_info">  
                        <label> Additional information: </label> <br>
                        <textarea id="add_info" ></textarea>
                    </div>

                    <div class="type">
                        <label> Type </label>
                        <select id="unique_type">
                            <option> Select category </option>
                        </select>
<!-- 
                        <label> Available quantity: </label>
                        <input type="number" id="qty" min="1" required> -->
                    </div>

                    <button type="submit"> Upload </button> 

                     <!-- <button> <a href="../products/myproduct.html"> Upload </a> </button> -->

                </div>

            </div>

        </form>

        </section>

        <script>
       
       
        // let imgBox = document.getElementById("imgBox");
        // let loadFile = function(event){
        //     imgBox.style.backgroundImage = "url(" + URL.createObjectURL(event.target.files[0])+")";
        // }



        function add_product(e) {

            e.preventDefault();

            let image = document.getElementById("image").value;
            let name = document.getElementById("name").value;
            let original_price = document.getElementById("original_price").value;
            let discount_price = document.getElementById("discount_price").value;
            let discount_percent = document.getElementById("discount_percent").value;
            let product_detail = document.getElementById("product_detail").value;
            let category = document.getElementById("category").value;
            let type = document.getElementById("type").value;
            let add_info = document.getElementById("add_info").value;
            let product_uuid = uuidv4();

            let add_products = JSON.parse(localStorage.getItem('add_products')) || [];

                
                add_products.push({
                image: image,
                name: name, 
                original_price:  original_price,
                discount_price: discount_price,
                discount_percent: discount_percent,
                product_detail: product_detail,
                add_info: add_info,
                category: category,
                type: type, 
                product_uuid: product_uuid
            });
            localStorage.setItem('add_products', JSON.stringify(add_products));
                console.log(localStorage.getItem('add_products'));
                // localStorage.setItem('unique_id', JSON.stringify(product_uuid));
                alert('Product uploaded successfully');
                location.href = "../products/myproduct.html";
                

            }

            


            // localStorage.setItem('unique_id', JSON.stringify(product_id));

            // alert("Product uploaded successfully");


            // window.location.href = "../products/myproduct.html";
            
            


        </script>

        <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>

    </body>
</html>